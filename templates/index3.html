<!DOCTYPE html>
<html style="overflow-x:auto;overflow-y:auto;">
<head>
    <title>QXIC</title>

    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <meta name="author"/>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=9,IE=10"/>
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-store">
    <style type="text/css">
        #affiche {
            display: block;
            width: 96%;
            height: 50px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }
        .affiche_text {
            position: absolute;
            top: 0;
            left: 100%;
            line-height: 45px;
            display: block;
            word-break: keep-all;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
    </style>
    <script>var d = "";</script>
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    {% include 'base.html' %}
    <script>

        var lastTime = new Date().getTime();
        var currentTime = new Date().getTime();
        var timeOut = 30 * 60 * 1000; //设置超时时间： 10分

        $(function () {
            var ttt= setTimeout(marquee(), 1000);
            /* 鼠标移动事件 */
            $(document).mouseover(function () {
                lastTime = new Date().getTime(); //更新操作时间
                //console.log('lastTime='+lastTime);

            });

        });
        /* 定时器  间隔1秒检测是否长时间未操作页面  */
        var quitTime = window.setInterval(testTime, 60 * 1000);

        function testTime() {
            currentTime = new Date().getTime(); //更新当前时间
            console.log('currentTime=' + currentTime);

            if (currentTime - lastTime > timeOut) { //判断是否超时
                console.log("超时");
                window.location.href = '/system/logout/';
                // 清除掉定时器
                window.clearInterval(quitTime)
            }
        }

        var textWidth = $('.affiche_text').width();
        function marquee() {
            let scrollWidth = $('#affiche').width();
            {#let textWidth = $('.affiche_text').width();#}
            let i = scrollWidth;
            setInterval(function() {
                i = i-2;
                if(i < -textWidth ) {
                    i = scrollWidth;
                }
                $('.affiche_text').animate({'left': i+'px'}, 20);
            }, 20);
        }

        let websocket = init_websocket()
        websocket.onmessage = function (event) {
         let data = JSON.parse(event.data);
         if(data.is_notice){
             $("#notice").append("<span onclick='clear_notice(this)' message_id='"+ data.message_id +"' class='label label-" + data.notice_type + "' style='font-size: 20px'>["+ data.tag +"] " + data.notice + "</span>   ")
             textWidth = $("#notice").width()

         }
        };
        websocket.onclose = function (event) {
            console.log("已断开websocket服务器，无法接收消息提示（请重新刷新页面）")
            websocket.close()
        }

        window.onbeforeunload = function(){
            websocket.close()
        }

        function clear_notice(a){
            jp.info($(a).html())
            $(a).remove()
            let json = {"message_id": $(a).attr("message_id"), "is_confirm": true}
            websocket.send(JSON.stringify(json))
        }
    </script>

    <!-- 引入自定义文件 -->
    <script type="text/javascript">var ctx = '/ani/a', ctxStatic = '/ani/static';</script>
    <link rel="stylesheet" id="theme" href="{{ static ('/ani/static/common/css/app-midnight-blue.css') }}"/>
    <script src="{{ static ('/ani/static/common/js/jeeplus.js') }}"></script>


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">

    <meta name="decorator" content="ani"/>
    <script src="{{ static ('/ani/static/plugin/js-menu/contabs.js') }}"></script>
    <link id="theme-tab" href="{{ static ('/ani/static/plugin/js-menu/menuTab-midnight-blue.css') }}" rel="stylesheet"/>

    <meta name="decorator" content="ani"/>
</head>
<body id="" class="" style="">

<nav class="navbar topnav-navbar navbar-fixed-top" role="navigation">
    <div class="navbar-header text-center">
        <button type="button" class="navbar-toggle" id="showMenu">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>

        <a class="navbar-brand J_menuItem" href="/tooling/ShowTipNoList/">QXIC </a>
    </div>
    <div class="collapse navbar-collapse">
        <form class="navbar-form navbar-left" role="search">
            <span class="glyphicon glyphicon-search"></span>
            <div class="form-group">
                <input type="text" class="form-control" placeholder="">
            </div>
        </form>
        <ul class="nav navbar-nav">
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"><span
                        class="glyphicon glyphicon-envelope"></span><span class="badge badge-green">0</span></a>

                <ul class="dropdown-menu animated fadeIn">
                    <li class="messages-top text-center">
                        你有 0 封未读邮件.
                    </li>


                    <li class=" text-center">
                        <a class="J_menuItem" href="/ani/a/iim/mailBox/list?orderBy=sendtime desc">
                            <font color='gray'> <i class="fa fa-envelope"></i> 查看所有邮件</font>
                        </a>
                    </li>
                </ul>

            </li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">
                    <span class="glyphicon glyphicon-bell"></span><span class="badge badge-red">0</span>
                </a>
                <ul class="dropdown-menu animated fadeIn">
                    <li class="messages-top text-center">
                        你有 0 条新通知.
                    </li>
                </ul>

            </li>
        </ul>
{#        <div style="position: absolute;width: 60%; height:40px;right: 12%;">#}
{#                    <div id="affiche">#}
{#                        <div id="notice" class="affiche_text">#}
{#                            <label style="font-size: 30px;color: #0d1318">测试</label>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
        <ul class="nav navbar-nav pull-right navbar-right">
            <li>
                <div class="row" style="margin: 10px 10px 0 0;">
                    <div class="col-sm-4">
                        <span style="margin: 12px 0 0 0;">Tab</span>
                    </div>
                    <div class="col-sm-8">
                        <div class="onoffswitch">
                            <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="switchTab"
                                   checked>
                            <label class="onoffswitch-label" for="switchTab">
                                <span class="onoffswitch-inner"></span>
                                <span class="onoffswitch-switch"></span>
                            </label>
                        </div>
                    </div>
                </div>

            </li>


            <li class="dropdown admin-dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                    <img src="{{ static ('/ani/userfiles/sys/user/images/tim7g.jpg')  }}" class="topnav-img"
                         alt=""><span
                        class="hidden-sm">{{ request.session.MASK_DP_SESSION_CURRENT_USER_LOGINNAME }}</span>
                </a>
                <ul class="dropdown-menu animated fadeIn" role="menu">
                    <li><a class="J_menuItem" href="/system/user/info/view/">Personal Info</a>
                    </li>
                    <!--
                  <li><a href="javaScript:changeStyle()">切换成横向菜单</a>
                  </li>
                  -->
                    <li><a href="/system/logout/">Logout</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <ul class="nav navbar-nav pull-right hidd">
        <li class="dropdown admin-dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                <img src="" class="topnav-img" alt=""><span class="hidden-sm">李云龙</span>
            </a>
            <ul class="dropdown-menu animated fadeIn" role="menu">
                <li><a class="J_menuItem" href="/system/user/info/view/">Personal Info</a>
                </li>
                <li><a href="/system/logout/">Logout</a>
                </li>
            </ul>
        </li>
    </ul>
</nav>
<aside id="sidebar">
    <div class="sidenav-outer">
        <div class="side-widgets">
            <div class="text-center" style="padding-top:10px;">
                <a href="#"><img class="img-circle user-avatar" src="" class="user-avatar"/></a>
                <li class="dropdown admin-dropdown" style="padding-top:10px;">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                        <font color="white">{{ request.session.MASK_DP_SESSION_CURRENT_USER_LOGINNAME }}<b
                                class="caret"></b></font>
                    </a>
                    <ul class="dropdown-menu animated fade in" style="left:35px" role="menu">
                        <li><a class="J_menuItem" href="/system/user/info/view/">Personal Info</a>
                        </li>
                        <!--<hr>
                          <li><a href="javaScript:changeStyle()">切换成横向菜单</a>
                          </li>
                          <hr>
                          -->
                        <li><a href="/system/logout/">Logout</a>
                        </li>
                    </ul>
                </li>
            </div>

            <div class="widgets-content">
                <div class="menu">
                    <div class="menu-body">
                        <ul class="nav nav-pills nav-stacked sidenav" id="1">


                            <!--
                            <li class="panel">
                            <a  data-toggle="collapse" data-parent="#1" class="collapsed" href="#4"><i class="fa fa fa-th"></i>&nbsp;&nbsp;JDV<span class="pull-right fa fa-angle-toggle"></span></a>
                            <ul id="4" class="nav collapse">
                            <li><a class="J_menuItem" href="/jdv/payment_check/list/"><i class="fa "></i>&nbsp;&nbsp;Payment Check</a></li>
                            <li><a class="J_menuItem" href="/jdv/jdv_view/"><i class="fa "></i>&nbsp;&nbsp;JDV Service</a></li>
                            </ul>
                            </li>
                            -->
                            {% for menu_parent in menu_list_parent %}
                                {% if menu_parent.id in request.session.MASK_DP_SESSION_CURRENT_USER_PERMISSION_MENU_ID_LIST %}
                                    {% if menu_parent.type == 2 %}
                                        <li><a class="J_menuItem" href="{{ menu_parent.href }}"><i
                                                class="fa {{ menu_parent.icon }}"></i><span>&nbsp;&nbsp;{{ menu_parent.name }}</span></a>
                                        </li>

                                    {% else %}
                                        <li class="panel">
                                            <a data-toggle="collapse" data-parent="#1" class="collapsed"
                                               href="#{{ menu_parent.id }}"><i class="fa fa {{ menu_parent.icon }}"></i>&nbsp;&nbsp;{{ menu_parent.name }}<span
                                                    class="pull-right fa fa-angle-toggle"></span></a>
                                            <ul id="{{ menu_parent.id }}" class="nav collapse">
                                                {% for menu_sub in menu_list_sub %}
                                                    {% if menu_sub.id in request.session.MASK_DP_SESSION_CURRENT_USER_PERMISSION_MENU_ID_LIST %}
                                                        {% if menu_sub.parent_id == menu_parent.id %}
                                                            <li><a class="J_menuItem" href="{{ menu_sub.href }}"><i
                                                                    class="fa {{ menu_sub.icon }}"></i>&nbsp;&nbsp;{{ menu_sub.name }}
                                                            </a></li>
                                                        {% endif %}
                                                    {% endif %}
                                                {% endfor %}
                                            </ul>
                                        </li>
                                    {% endif %}

                                {% endif %}
                            {% endfor %}
{#                            <div id="affiche" style="border: 1px solid red">#}
{#                                <div class="affiche_text">#}
{#                                    酒店 友情提示：1.周五、周六、节假日房价有一定上调，请以官网价格为准!#}
{#                                </div>#}
{#                            </div>#}
                            <!-- <li><a class="J_menuItem" href="/form_query"><i class="fa fa fa-flash"></i>&nbsp;&nbsp;Ftp Link Create</a></li> -->
                            <!-- <li><a class="J_menuItem" href="/form_query"><i class="fa fa fa-magic"></i>&nbsp;&nbsp;JDV Service</a></li> -->
                            <!-- <li><a class="J_menuItem" href="/form_query"><i class="fa fa fa-envelope"></i>&nbsp;&nbsp;Contact Us</a></li> -->
                            <!-- <li><a class="J_menuItem" href="/form_query"><i class="fa fa fa-legal"></i>&nbsp;&nbsp;CSV & Sales</a></li> -->
                            <!-- <li><a class="J_menuItem" href="/form_query"><i class="fa fa fa-umbrella"></i>&nbsp;&nbsp;Lot Create & Query</a></li> -->
                            <!-- <li><a class="J_menuItem" href="/form_query"><i class="fa fa fa-truck"></i>&nbsp;&nbsp;MT Form Qery</a></li> -->
                            <!-- <li><a class="J_menuItem" href="/form_query"><i class="fa fa fa-pinterest"></i>&nbsp;&nbsp;Conver Status Query</a></li> -->
                            <!-- <li><a class="J_menuItem" href="/form_query"><i class="fa fa fa-pinterest-square"></i>&nbsp;&nbsp;Writer Info. Tree</a></li> -->
                            <!-- <li><a class="J_menuItem" href="/form_query"><i class="fa fa fa-money"></i>&nbsp;&nbsp;Writer Tooling Bias Manager</a></li> -->
                            <!-- <li><a class="J_menuItem" href="/form_query"><i class="fa fa fa-envelope"></i>&nbsp;&nbsp;Writer MDT Manager</a></li> -->


                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</aside>
<section id="body-container" class="animation">


    <!--选项卡  -->
    <div class="main-container" id="main-container">
        <div class="main-content">
            <div class="main-content-inner">
                <div id="breadcrumbs" class="breadcrumbs">
                    <div class="content-tabs">
                        <button id="hideMenu" class="roll-nav roll-left-0 J_tabLeft"><i class="fa fa-align-justify"></i>
                        </button>
                        <button class="roll-nav roll-left J_tabLeft"><i class="fa fa-backward"></i>
                        </button>
                        <nav class="page-tabs J_menuTabs">
                            <div class="page-tabs-content">
                                <a href="javascript:;" class="active J_menuTab" data-id="/home/">Index</a>
                            </div>
                        </nav>
                        <button class="roll-nav roll-right J_tabRight"><i class="fa fa-forward"></i>
                        </button>
                        <a href="/system/logout/" class="roll-nav roll-right J_tabExit"><i
                                class="fa fa fa-sign-out"></i>Exit</a>
                    </div>
                </div>

                <div class="J_mainContent" id="content-main" style="height:calc(100% - 40px)">
                    <iframe class="J_iframe" name="iframe0" width="100%" height="100%" src="/home/" frameborder="0"
                            data-id="/home/" seamless></iframe>
                </div>
            </div>


        </div>
    </div>

    <div class="footer">
        <div class="pull-left">Mask DP</a> &copy; 2019-2025</div>
        <div id="affiche" style="width: 70%;right: 0">
            <div id="notice" class="affiche_text"></div>
        </div>
    </div>

</section>


<script>
    $(function () {
        $('.theme-picker').click(function () {
            changeTheme($(this).attr('data-theme'));
        });
        $('#showMenu').click(function () {
            $('body').toggleClass('push-right');
        });
        $('#hideMenu').click(function () {
            $('body').removeClass('push-right')
            $('body').toggleClass('push-left');
        });
        $("#switchTab").change(function () {
            if ($("#switchTab").is(':checked')) {
                $("#breadcrumbs").attr("class", "breadcrumbs");
                $("#content-main").css("height", "calc(100% - 40px)")
                $.get('/ani/a/tab/true?url=' + window.top.location.href, function (result) {
                });
            } else {
                $("#breadcrumbs").attr("class", "un-breadcrumbs");
                $("#content-main").css("height", "calc(100%)")
                $.get('/ani/a/tab/false?url=' + window.top.location.href, function (result) {
                });
            }
        })


    });

    /**
     *切换主题
     */
    function changeStyle() {
        $.get('/ani/a/style/jp?url=' + window.top.location.href, function (result) {
            window.location.reload();
        });
    }

    /**
     * 切换颜色
     * @param theme
     */
    function changeTheme(theme) {
        var link = $('<link>')
            .appendTo('head')
            .attr({type: 'text/css', rel: 'stylesheet'})
            .attr('href', '/ani/static/common/css/app-' + theme + '.css');


        var tabLink = $('<link>')
            .appendTo('head')
            .attr({type: 'text/css', rel: 'stylesheet'})
            .attr('href', '/ani/static/plugin/js-menu/menuTab-' + theme + '.css');

        var childrenLink = $('<link>').appendTo($(".J_iframe").contents().find("head"))
            .attr({type: 'text/css', rel: 'stylesheet'})
            .attr('href', '/ani/static/common/css/app-' + theme + '.css');

        $.get('/ani/a/theme/' + theme + '?url=' + window.top.location.href, function (result) {
            setTimeout(function () {
                $('#theme').remove();
                $('#theme-tab').remove();
                $(".J_iframe").contents().find("#theme").remove();
            }, 500);
            link.attr("id", "theme");
            childrenLink.attr("id", "theme");
            tabLink.attr("id", "theme-tab")
        });

    }


</script>


</body>
</html>